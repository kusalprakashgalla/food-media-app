{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\kusal\\\\OneDrive\\\\Desktop\\\\Placement_Files\\\\placement_projects\\\\mern-project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\kusal\\\\OneDrive\\\\Desktop\\\\Placement_Files\\\\placement_projects\\\\mern-project\\\\client\\\\src\\\\components\\\\pages\\\\Createpost.jsx\";\nimport React, { useState } from \"react\";\nimport M from 'materialize-css';\nimport { useNavigate, Link } from 'react-router-dom';\nfunction Createpost() {\n  var _this = this;\n  var navigate = useNavigate();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    title = _useState2[0],\n    setTitle = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    body = _useState4[0],\n    setBody = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    image = _useState6[0],\n    setImage = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    url = _useState8[0],\n    setUrl = _useState8[1];\n  var Postdetails = function Postdetails() {\n    var data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"mYeat\");\n    data.append(\"cloud_name\", \"dvlrcvfeu\");\n    fetch(\"https://api.cloudinary.com/v1_1/dvlrcvfeu/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      setUrl(data.url);\n    }).catch(function (err) {\n      console.log(err);\n    });\n    fetch(\"/createpost\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        title: title,\n        body: body,\n        photo: url\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      console.log(data);\n      if (data.error) {\n        M.toast({\n          html: data.error,\n          classes: \"#e53935 red darken-1\"\n        });\n      } else {\n        localStorage.setItem(\"jwt\", data.token);\n        localStorage.setItem(\"user\", /*#__PURE__*/React.createElement(JSON, {\n          className: \"stringify\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 50\n          }\n        })(data.user));\n        M.toast({\n          html: \"post created\",\n          classes: \"#388e3c green darken-2\"\n        });\n        navigate(\"/home\");\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, \"Create-Post\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, \"Title:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: title,\n    onChange: function onChange(e) {\n      return setTitle(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, \"body:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: body,\n    onChange: function onChange(e) {\n      return setBody(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    action: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"file-field input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"btn\",\n    style: {\n      backgroundColor: \"#2568FB\",\n      color: \"black\",\n      fontWeight: \"bold\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, \"File\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: function onChange(e) {\n      return setImage(e.target.files[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"file-path-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    class: \"file-path validate\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn waves-effect waves-light\",\n    type: \"submit\",\n    name: \"action\",\n    onClick: function onClick() {\n      return Postdetails();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, \"Submit\"));\n}\nexport default Createpost;","map":{"version":3,"names":["React","useState","M","useNavigate","Link","Createpost","navigate","title","setTitle","body","setBody","image","setImage","url","setUrl","Postdetails","data","FormData","append","fetch","method","then","res","json","catch","err","console","log","headers","JSON","stringify","photo","error","toast","html","classes","localStorage","setItem","token","user","textAlign","display","e","target","value","backgroundColor","color","fontWeight","files"],"sources":["C:/Users/kusal/OneDrive/Desktop/Placement_Files/placement_projects/mern-project/client/src/components/pages/Createpost.jsx"],"sourcesContent":["import React,{useState} from \"react\";\r\nimport M from 'materialize-css';\r\nimport {useNavigate,Link} from 'react-router-dom'\r\nfunction Createpost (){\r\n\r\n    const navigate = useNavigate();\r\n    const [title,setTitle] = useState(\"\");\r\n    const [body,setBody] = useState(\"\");\r\n    const [image,setImage] = useState(\"\");\r\n    const [url,setUrl] = useState(\"\");\r\n\r\n\r\n    const Postdetails =()=>{\r\n        const  data = new FormData()\r\n        data.append(\"file\",image)\r\n        data.append(\"upload_preset\",\"mYeat\")\r\n        data.append(\"cloud_name\",\"dvlrcvfeu\")\r\n        fetch(\"https://api.cloudinary.com/v1_1/dvlrcvfeu/image/upload\",{\r\n            method: \"post\",\r\n            body: data\r\n\r\n        })\r\n        .then(res=>res.json())\r\n        .then(data=>{\r\n            setUrl(data.url)\r\n        })\r\n        .catch(err=>{console.log(err)})\r\n        fetch(\"/createpost\",{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                title,\r\n                body,\r\n                photo:url\r\n            })\r\n\r\n            }).then(res=>res.json())\r\n            .then(data=>{\r\n                console.log(data)\r\n                if (data.error){\r\n                    M.toast({html: data.error,classes:\"#e53935 red darken-1\"})\r\n                }\r\n                else{\r\n                    localStorage.setItem(\"jwt\", data.token)\r\n                    localStorage.setItem(\"user\", <JSON className=\"stringify\"></JSON>(data.user))\r\n                    M.toast({html: \"post created\",classes:\"#388e3c green darken-2\"})\r\n                    navigate(\"/home\")\r\n                }\r\n            }).catch(err=>{\r\n                console.log(err)\r\n        })\r\n    }\r\n\r\n    return(\r\n            <div className=\"card post\">\r\n                <h3 style={{textAlign:\"center\"}}>Create-Post</h3>\r\n                <div style={{display:\"flex\"}}>\r\n                    <h5>Title:</h5>\r\n                    <input type=\"text\" value={title} onChange={(e)=>setTitle(e.target.value)}/> \r\n                </div>\r\n                <div style={{display:\"flex\"}}>\r\n                <h5>body:</h5> \r\n                <input type=\"text\" value={body} onChange={(e)=>setBody(e.target.value)}/> \r\n                </div>\r\n                <form action=\"#\">\r\n                    <div class=\"file-field input-field\">\r\n                        <div class=\"btn\" style={{backgroundColor:\"#2568FB\",color:\"black\",fontWeight:\"bold\"}}>\r\n                            <span>File</span>\r\n                            <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])}/>\r\n                        </div>\r\n                        <div class=\"file-path-wrapper\">\r\n                            <input class=\"file-path validate\" type=\"text\"/>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n                <button class=\"btn waves-effect waves-light\" type=\"submit\" name=\"action\" onClick={()=>Postdetails()}>Submit</button>\r\n            </div>     \r\n    );\r\n}\r\n\r\nexport default Createpost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}