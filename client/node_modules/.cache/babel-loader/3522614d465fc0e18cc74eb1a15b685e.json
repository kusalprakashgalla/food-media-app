{"ast":null,"code":"'use strict';\n\nvar $ = require('../internals/export');\nvar aWeakMap = require('../internals/a-weak-map');\nvar WeakMapHelpers = require('../internals/weak-map-helpers');\nvar get = WeakMapHelpers.get;\nvar has = WeakMapHelpers.has;\nvar set = WeakMapHelpers.set;\n\n// `WeakMap.prototype.emplace` method\n// https://github.com/tc39/proposal-upsert\n$({\n  target: 'WeakMap',\n  proto: true,\n  real: true,\n  forced: true\n}, {\n  emplace: function emplace(key, handler) {\n    var map = aWeakMap(this);\n    var value, inserted;\n    if (has(map, key)) {\n      value = get(map, key);\n      if ('update' in handler) {\n        value = handler.update(value, key, map);\n        set(map, key, value);\n      }\n      return value;\n    }\n    inserted = handler.insert(key, map);\n    set(map, key, inserted);\n    return inserted;\n  }\n});","map":null,"metadata":{},"sourceType":"script"}